# Keploy Mock Test Workflow
# This workflow runs Keploy mock tests on pull requests and merges to main
# Generated by Keploy MCP Tool

name: Keploy Mock Test

on:
  pull_request:
    branches: [main]
  push:
    branches: [main]

jobs:
  keploy-mock-test:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Keploy
        run: |
          curl --silent --location "https://github.com/keploy/keploy/releases/latest/download/keploy_linux_amd64.tar.gz" | tar xz -C /tmp
          sudo mv /tmp/keploy /usr/local/bin/keploy
          keploy --version

      - name: Run Keploy Mock Test
        run: |
          keploy mock test --command "go test -v" --mockPath "./keploy"
        env:
          # Add any environment variables your app needs
          CI: true
